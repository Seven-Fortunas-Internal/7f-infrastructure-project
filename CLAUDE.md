# Seven Fortunas Infrastructure Project - Agent Instructions

**Project:** AI-Native Enterprise Infrastructure
**Purpose:** Build GitHub organizations, Second Brain, and 7F Lens Intelligence Platform
**Approach:** BMAD-first methodology + Autonomous agent (60-70% automated)

---

## Project Context

You are building the foundational infrastructure for Seven Fortunas, an AI-native company focused on digital inclusion for marginalized communities. This project creates:

1. **GitHub Organizations** - Two-org model (public + internal) with team structure
2. **Second Brain** - Progressive disclosure knowledge system (brand, culture, domain expertise)
3. **7F Lens Intelligence Platform** - Multi-dimensional dashboards (AI, fintech, edutech trends)
4. **BMAD Library Deployment** - 70+ production-ready workflow skills
5. **User Profile System** - YAML-based profiles for AI agent personalization
6. **Voice Input System** - OpenAI Whisper cross-platform speech-to-text

---

## Your Working Directory

**CRITICAL:** Your project directory is:
```
/home/ladmin/seven-fortunas-workspace/7f-infrastructure-project
```

Always `cd` to this directory before running any commands:
```bash
cd /home/ladmin/seven-fortunas-workspace/7f-infrastructure-project
pwd  # Verify you're in correct location
```

---

## Project Structure

```
7f-infrastructure-project/
├── CLAUDE.md                    # This file (agent instructions)
├── README.md                    # Project overview
├── app_spec.txt                 # Feature specification (generated from PRD)
├── feature_list.json            # Progress tracking (generated by initializer agent)
├── claude-progress.txt          # Session logs
├── scripts/                     # Autonomous agent scripts
│   ├── run_autonomous.sh        # Single-session launcher
│   ├── run_autonomous_continuous.sh  # Multi-session launcher
│   ├── agent.py                 # Claude SDK agent runner
│   ├── client.py                # SDK client configuration
│   └── prompts.py               # Prompt loading utilities
├── prompts/                     # Agent prompts
│   ├── initializer_prompt.md    # Session 1 prompt
│   └── coding_prompt.md         # Sessions 2+ prompt
├── outputs/                     # Generated artifacts
│   ├── github-orgs/             # Org configurations
│   ├── repositories/            # Repo scaffolds
│   ├── second-brain/            # Second Brain content
│   └── dashboards/              # Dashboard configs
└── .git/                        # Git repository
```

---

## Development Rules

### Git Commits

**Commit frequently** - After each feature completion:
```bash
git add .
git commit -m "feat(F015): Create AI Advancements Dashboard

Implemented RSS feed aggregation, GitHub releases tracking, and
Claude API summarization workflow.

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"
```

**Commit message format:**
- Use conventional commits: `feat:`, `fix:`, `docs:`, `chore:`
- Include feature ID from feature_list.json: `feat(F015):`
- Add Co-Authored-By line (always)

**When to commit:**
- After completing each feature in feature_list.json
- After creating/modifying 3-5 files
- Before switching to different feature area
- At end of each session

### Testing

**Verify every implementation:**

| Operation | Test Command | Success Criteria |
|-----------|--------------|------------------|
| GitHub org exists | `gh api /orgs/Seven-Fortunas` | HTTP 200 status |
| Repo created | `gh repo view Seven-Fortunas/dashboards` | No error |
| File exists | `ls -la path/to/file` | File listed |
| JSON valid | `python -m json.tool file.json` | No syntax errors |
| YAML valid | `yamllint file.yml` | No errors |
| BMAD submodule | `git submodule status` | Shows _bmad |
| Symlinks work | `ls -la .claude/commands/bmad-*` | Symlinks listed |

**Mark feature as "pass" only when ALL tests succeed.**

### Security

**NEVER commit secrets:**
- ❌ API keys
- ❌ Passwords
- ❌ GitHub tokens
- ❌ Private keys

**Use GitHub Actions secrets instead:**
```yaml
env:
  ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
  GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

**Enable security features on all repos:**
- ✅ Dependabot (automated dependency updates)
- ✅ Secret scanning (detect committed secrets)
- ✅ Code scanning (CodeQL for vulnerabilities)

### Branding

**Use PLACEHOLDER branding only:**

```css
/* Placeholder Seven Fortunas colors */
:root {
  --primary: #1E3A8A;      /* Deep Blue */
  --secondary: #10B981;     /* Emerald Green */
  --accent: #F59E0B;        /* Amber */
}
```

**Add comments everywhere:**
```html
<!-- TODO: Replace with real Seven Fortunas branding (Henry will provide) -->
<div class="hero" style="background: linear-gradient(135deg, #1E3A8A 0%, #10B981 100%);">
```

**What NOT to do:**
- ❌ Don't create real logos (use placeholder)
- ❌ Don't write detailed brand documentation (Henry will do this)
- ❌ Don't spend time on visual design (focus on functionality)

### BMAD Deployment

**Add BMAD as submodule** (not direct copy):
```bash
cd /home/ladmin/seven-fortunas-workspace/seven-fortunas-brain
git submodule add https://github.com/bmad-method/bmad-method.git _bmad
cd _bmad
git checkout v6.0.0  # Pin to specific version
cd ..
git add .gitmodules _bmad
git commit -m "feat: Add BMAD v6.0.0 as submodule"
```

**Create symlinks** for easy skill invocation:
```bash
mkdir -p .claude/commands
cd .claude/commands
ln -s ../../_bmad/bmm/workflows/create-prd/workflow.md bmad-bmm-create-prd.md
ln -s ../../_bmad/bmm/workflows/create-story/workflow.md bmad-bmm-create-story.md
# ... repeat for all 18 BMAD skills
```

**Verify symlinks work:**
```bash
ls -la .claude/commands/bmad-*
# Should show symlinks pointing to _bmad/ directory
```

### Bounded Retries

**If a feature fails:**

1. **Attempt 1:** Try initial approach (as specified in app_spec.txt)
2. **Attempt 2:** Try alternative approach (different API, different tool)
3. **Attempt 3:** Try workaround or minimal implementation
4. **Attempt 4+:** Mark as "blocked", log issue, move to next feature

**Track failures** in `.issue_tracker_state.json`:
```json
{
  "F015": {
    "feature_id": "F015",
    "feature_name": "Enable X API integration",
    "attempts": 3,
    "last_error": "HTTP 401: X API requires paid account",
    "blocked": true,
    "blocked_reason": "Needs human to authorize X API key"
  }
}
```

**Update feature_list.json** when blocking:
```json
{
  "id": "F015",
  "name": "Enable X API integration",
  "status": "blocked",
  "blocked_reason": "X API requires paid account, needs human authorization",
  "attempts": 3
}
```

**Move to next feature** - Don't get stuck!

---

## What NOT to Do

### GitHub Operations

- ❌ **Don't push to GitHub** (commit locally only, human will push after review)
- ❌ **Don't enable paid features** (stay on GitHub Free tier)
- ❌ **Don't create private repos in public org** (keep org visibility consistent)
- ❌ **Don't invite users** (human will handle onboarding)

### Branding & Content

- ❌ **Don't create real branding** (Henry will run `7f-brand-system-generator` skill)
- ❌ **Don't write detailed content** (Second Brain content requires human curation)
- ❌ **Don't populate dashboards** (data sources need human authorization)

### Time Management

- ❌ **Don't spend > 3 attempts on same feature** (mark as blocked and move on)
- ❌ **Don't implement features not in app_spec.txt** (stick to specification)
- ❌ **Don't refactor existing code** (focus on implementing pending features)

---

## Archon Integration (Optional)

If Archon MCP server is available at `http://localhost:8051/mcp`:

**Update tasks as you complete features:**
```python
# Mark task as "doing" when starting
manage_task(
  action="update",
  task_id="task_abc123",
  status="doing"
)

# Mark task as "done" when complete
manage_task(
  action="update",
  task_id="task_abc123",
  status="done",
  description="Completed 5 features: F001-F005 (GitHub orgs created)"
)
```

**If Archon is not available:** Continue without it. Progress is tracked in `feature_list.json`.

---

## Success Criteria

### Feature is "Complete" When:

- ✅ All implementation steps from app_spec.txt finished
- ✅ All tests pass (GitHub API calls succeed, files exist, syntax valid)
- ✅ Changes committed to git with descriptive message
- ✅ Logged in claude-progress.txt
- ✅ feature_list.json updated to `"status": "pass"`

### MVP is "Complete" When:

- ✅ 25+ features marked "pass" in feature_list.json
- ✅ 2 GitHub orgs created (Seven-Fortunas, Seven-Fortunas-Internal)
- ✅ 6+ repositories created and initialized
- ✅ BMAD library deployed as submodule
- ✅ Second Brain structure scaffolded (directories, placeholder content)
- ✅ AI Advancements Dashboard implemented (data sources, automation)
- ✅ GitHub Actions workflows configured
- ✅ All changes committed to git
- ✅ Documentation generated (READMEs, guides)
- ✅ Security features enabled (Dependabot, secret scanning)
- ✅ No features remain "fail" status (only "pass" or "blocked")

---

## Common Issues & Solutions

### GitHub CLI Authentication

**Problem:** `gh api` returns "HTTP 401: Unauthorized"

**Solution:**
```bash
gh auth login
gh auth status  # Verify authentication
```

### BMAD Submodule Not Working

**Problem:** `git submodule add` fails

**Solution:**
```bash
# Check if submodule already exists
git submodule status

# If it exists, update it
git submodule update --init --recursive

# If not, verify URL is correct
git submodule add https://github.com/bmad-method/bmad-method.git _bmad
```

### Tests Failing Repeatedly

**Problem:** Same feature fails 3+ times

**Solution:**
1. Read error message carefully
2. Try alternative approach (different API, different tool)
3. If still failing, mark as "blocked" and log reason
4. Move to next feature

**Don't get stuck on one feature!**

---

## Resources

**Planning Documents:**
- Product Brief: `_bmad-output/planning-artifacts/product-brief-7F_github-2026-02-10.md`
- Architecture: `_bmad-output/planning-artifacts/architecture-7F_github-2026-02-10.md`
- PRD: `_bmad-output/planning-artifacts/prd.md`
- Autonomous Workflow Guide: `autonomous-workflow-guide-7f-infrastructure.md`

**GitHub Organizations:**
- Public: https://github.com/Seven-Fortunas
- Internal: https://github.com/Seven-Fortunas-Internal

**Key Repositories:**
- Brain: https://github.com/Seven-Fortunas-Internal/seven-fortunas-brain
- Dashboards: https://github.com/Seven-Fortunas/dashboards
- Website: https://github.com/Seven-Fortunas/seven-fortunas.github.io

---

**Document Version:** 1.0
**Last Updated:** 2026-02-10
**Maintainer:** Jorge (VP AI-SecOps)
