# API Rate Limit Configuration (NFR-6.1)
# System SHALL respect rate limits of all external APIs

rate_limits:
  github:
    enabled: true
    authenticated_limit: 5000
    period: "1 hour"
    header_remaining: "x-ratelimit-remaining"
    header_reset: "x-ratelimit-reset"
    throttle_at_percentage: 80  # Start throttling at 80% usage

  claude:
    enabled: true
    requests_per_minute: 50
    requests_per_day: 40000
    throttle_enabled: true

  reddit:
    enabled: true
    unauthenticated_limit: 60
    period: "1 minute"
    requires_user_agent: true
    user_agent: "SevenFortunas/1.0 (Dashboard Aggregator)"

  openai_whisper:
    enabled: true
    # No documented limit, use conservative defaults
    requests_per_minute: 50
    throttle_enabled: true

  x_api:
    enabled: false  # Phase 2 feature
    tier: "Basic"
    cost: "$100/month"
    requests_per_month: 10000

# Monitoring configuration
monitoring:
  enabled: true
  check_interval_hours: 1
  alert_on_violations: true
  alert_on_high_usage: true
  high_usage_threshold_pct: 80

# Metrics retention
metrics:
  retention_days: 90
  metrics_file: "compliance/rate-limits/metrics/api-usage.jsonl"
  github_file: "compliance/rate-limits/metrics/github-rate-limit.jsonl"
  violations_file: "compliance/rate-limits/metrics/violations.jsonl"

# Compliance reporting
reporting:
  enabled: true
  frequency: "weekly"
  reports_dir: "compliance/rate-limits/reports"
  include_trends: true
  include_recommendations: true
